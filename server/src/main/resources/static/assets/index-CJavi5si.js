import{r as x,l as e}from"./chunk-HA7DTUK3-DrNZtXfs.js";import{u as w}from"./useQuery-CtBUlfUK.js";import{d as C}from"./Utils-6MWpJHdW.js";import"./index-Dq7Ccb3X.js";import{u as y,b as N}from"./http-dO_zUEib.js";import{T as n}from"./Typography-B2rbqJ1w.js";import{A as E}from"./Alarm-BRPge6HA.js";import{B as r}from"./Box-lkY65lPb.js";import{i as S,S as _}from"./SearchNormal1-BKIIQham.js";import{s as u}from"./chunk-TLYTI3QM-OrR10yBI.js";import{t as I,a as k,b as L,c as A,d as v,e as B}from"./chunk-F3UDT23P-CmcUTUZk.js";import{s as D}from"./chunk-MSDKUXDP-1VvPWETC.js";const T=[{key:"status",label:"Status",align:"start",width:100},{key:"issue",label:"Issue",align:"start",width:150},{key:"issue_details",label:"Issue details",align:"start",width:150},{key:"resolutions",label:"Resolutions",align:"start",width:150}];function U({clusterType:c}){const p=y(s=>s.clusterId),[d,h]=x.useState(""),f=async()=>{const t=(await N.get(`/clusters/${p}/deprecations/${c==="ELASTIC"?"elastic-search":"kibana"}`)).data;return t==null?void 0:t.map((a,i)=>({key:String(i),issue:a==null?void 0:a.issue,status:a==null?void 0:a.type.toUpperCase(),issue_details:a==null?void 0:a.issueDetails,resolutions:a==null?void 0:a.resolutions}))},{data:l,isLoading:o,isRefetching:g,refetch:W}=w({queryKey:["get-deprecation-logs"],queryFn:f,staleTime:1/0}),m=x.useCallback((s,t)=>{const a=s[t];switch(t){case"status":return e.jsxs(n,{sx:{padding:"5px 7px",background:s.status==="CRITICAL"?"rgba(206, 98, 75, 0.13)":"rgba(227, 192, 69, 0.13)"},className:"flex w-max flex-row items-center gap-1 rounded-3xl",color:s.status==="CRITICAL"?"#E87D65":"#E0B517",fontFamily:"Inter",fontSize:"12px",fontWeight:"500",lineHeight:"normal",textTransform:"capitalize",children:[s.status==="CRITICAL"?e.jsx(C,{size:"14px",color:"currentColor"}):e.jsx(E,{size:"14px",color:"currentColor"})," ",s.status.toLowerCase()]});case"issue":return s.issue;case"issue_details":return s.issue_details;case"resolutions":return s.resolutions.map((i,j)=>e.jsx("li",{children:e.jsx("span",{className:"relative -left-[5px]",children:i})},j));default:return a}},[]),b=(l==null?void 0:l.filter(s=>{const t=d.toLowerCase(),a=s.resolutions.includes(t);return s.issue.toLowerCase().includes(t)||s.issue_details.toLowerCase().includes(t)||a}))||[];return e.jsx(r,{className:"flex rounded-2xl p-px w-full",sx:{background:"radial-gradient(#6E687C, #1D1D1D)"},children:e.jsxs(r,{className:"flex flex-col gap-4 py-4 px-6 w-full rounded-2xl bg-[#0d0d0d]",children:[e.jsxs(r,{className:"flex flex-col gap-[6px] w-full",children:[e.jsxs(n,{color:"#FFF",fontSize:"18px",fontWeight:"600",lineHeight:"normal",letterSpacing:"0.18px",children:[c==="ELASTIC"?"Elasticserach":"Kibana"," deprecated logs"]}),e.jsx(n,{maxWidth:"737px",color:"#6E6E6E",fontSize:"13px",fontWeight:"400",lineHeight:"20px",letterSpacing:"0.26px",children:"Resolve all critical issues before upgrading. Before making changes, ensure you have a current snapshot of your cluster. To start multiple reindexing tasks in a single request, use the Kibana batch reindexing API."})]}),e.jsxs(r,{className:"flex flex-col gap-[10px]",children:[e.jsxs(r,{className:"flex flex-row gap-3 justify-between items-center",children:[e.jsxs(r,{className:"flex flex-row items-center gap-6",children:[e.jsxs(n,{className:"flex flex-row items-center gap-2",color:"#E87D65",fontSize:"12px",fontWeight:"500",lineHeight:"normal",children:[e.jsx(r,{className:"min-h-2 min-w-2 w-min h-min rounded-[2px] bg-[#E87D65]"})," Critical:"," ",o?e.jsx(u,{className:"rounded-sm",children:e.jsx(r,{height:"16px",width:"10px"})}):l==null?void 0:l.filter(s=>s.status==="CRITICAL").length]}),e.jsxs(n,{className:"flex flex-row items-center gap-2",color:"#E0B517",fontSize:"12px",fontWeight:"500",lineHeight:"normal",children:[e.jsx(r,{className:"min-h-2 min-w-2 w-min h-min rounded-[2px] bg-[#E0B517]"})," Warning:"," ",o?e.jsx(u,{className:"rounded-sm",children:e.jsx(r,{height:"16px",width:"10px"})}):l==null?void 0:l.filter(s=>s.status==="WARNING").length]})]}),e.jsx(r,{className:"flex max-w-[264px] w-full",children:e.jsx(S,{classNames:{inputWrapper:"rounded-[10px] border border-solid border-[#2B2B2B] bg-[#161616] group-data-[focus=true]:bg-[#161616] data-[hover=true]:bg-default-50"},type:"text",placeholder:"Search",startContent:e.jsx(_,{size:"14px",color:"#6A6A6A"}),value:d,onChange:s=>h(s.target.value)})})]}),e.jsxs(I,{removeWrapper:!0,layout:"auto",isHeaderSticky:!0,classNames:{base:"max-h-[calc(var(--window-height)-292px)] h-[calc(var(--window-height)-292px)] overflow-scroll",table:"min-h-[400px] min-w-[600px]",th:"text-[#9D90BB] text-xs bg-[#161616] first:rounded-l-xl last:rounded-r-xl",td:"text-sm font-normal leading-normal border-b-[0.5px] border-solid border-[#1E1E1E] align-top px-[17.5px] py-6",tr:"[&>th]:h-[42px] [&>td]:h-[60px]"},children:[e.jsx(k,{columns:T,children:s=>e.jsx(L,{align:s.align,width:s.width,children:s.label},s.key)}),e.jsx(A,{items:b||[],isLoading:o||g,loadingContent:e.jsx(D,{classNames:{circle2:"border-b-[#8351F5]",circle1:"border-b-[#8351F5]"}}),emptyContent:e.jsx(n,{fontSize:"13px",fontWeight:"400",lineHeight:"20px",color:"#6E6E6E",children:"No deprecation available."}),children:s=>e.jsx(v,{children:t=>e.jsx(B,{children:m(s,t)})},s==null?void 0:s.key)})]})]})]})})}export{U as D};
